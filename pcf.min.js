pcf={adIsExpanded:false,closeCallback:null,geocoder:null,gmapsUrl:"https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false",iosVersion:null,isMobile:{Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return(this.Android()||this.BlackBerry()||this.iOS()||this.Opera()||this.Windows())}},isMraid:false,isPhad:false,videoPlaying:false,videoId:null,hashtag:null,executionID:null,campaignID:null,sessionID:null,gId:null,webServiceUrl:"http://lbs.phluant.com/web_services/",ajax:function(c,d){ajaxRequest=new XMLHttpRequest();var a="";if(typeof(c.data)!="undefined"){for(var b in c.data){if(a!=""){a+="&"}a+=b+"="+c.data[b]}}if(c.method=="GET"&&a!=""){c.url+="?"+a}ajaxRequest.open(c.method,c.url,true);if(c.method=="POST"){ajaxRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");ajaxRequest.send(a)}else{ajaxRequest.send()}ajaxRequest.onreadystatechange=function(){if(ajaxRequest.readyState==4&&ajaxRequest.status==200){d(ajaxRequest.responseText)}else{d(false)}}},clickthru:function(a){if(this.isPhad){ph.u.clickthru(a.url,a.name,this.sessionID)}else{console.log(a.name);window.open(a.url,"_blank")}},contract:function(){if(this.videoPlaying){this.videoClose()}if(this.isMraid){mraid.close()}if(this.isPhad){ph.t.close("MainPanel",this.sessionID)}else{console.log("contracting")}this.closeCallback()},expand:function(a){if(this.isPhad){ph.t.expand("MainPanel",this.sessionID,false,{width:a.width,height:a.height})}else{console.log("expanding to "+a.width+"px width, "+a.height+"px height.")}if(this.isMraid){this.adIsExpanded=true}},geolocation:function(b,d){var c={url:this.webServiceUrl+"geolocation/export",method:"GET",};if(typeof(b)=="object"){for(var a in b){c.data[a]=b[a]}}this.ajax(c,d)},geolocation_prompt:function(b,c){var a=this;navigator.geolocation.getCurrentPosition(function(d){var e={lat:d.coords.latitude,lng:d.coords.longitude};c(e)},function(d){if(b){a.geolocation(false,c)}})},get_stores:function(b,d){var c={url:this.webServiceUrl+"phluant/export",method:"GET",data:{type:"get_stores",}};if(typeof(b.campaign_id)=="undefined"){console.log("campaign_id is a required attribute for this function");return false}for(var a in b){c.data[a]=b[a]}this.ajax(c,d)},gid:function(a){if(this.isPhad){return this.gId(a)}else{return document.getElementById(a)}},gmaps_draw:function(g){console.log(g);var f=10;if(typeof(g.map_zoom)!="undefined"){f=g.map_zoom}var b={zoom:f,center:new google.maps.LatLng(g.lat,g.lng),disableDefaultUI:true,mapTypeId:google.maps.MapTypeId.ROADMAP};if(typeof(g.map_id)=="undefined"){console.log("A map id must be specified");return false}else{if(typeof(g.map_id)=="string"){g.map_id=this.gid(g.map_id)}}var e=new google.maps.Map(g.map_id,b);for(var c in g.markers){var a=g.markers[c];var d=new google.maps.LatLng(a.lat,a.lng);var a=new google.maps.Marker({position:d,map:e,title:a.title,zIndex:a.zIndex});if(typeof(a.clickthru)!="undefined"){google.maps.event.addListener(a,"click",function(){var h="http://maps.google.com/?saddr="+g.lat+","+g.lng+"&daddr="+a.lat+","+a.lng;if(this.isPhad){ph.u.clickthru(h,"GoogleMaps",a.clickthru.name,this.sessionID)}else{console.log(a.clickthru.name);window.open(h,"_blank")}})}}},gmaps_geo:function(b){if(this.geocoder==null){this.geocoder=new google.maps.Geocoder()}var a=this;geocoder.geocode({address:b.address},function(d,c){if(c==google.maps.GeocoderStatus.OK){b.callback(d)}else{if(typeof(b.failover)!="undefined"){if(b.failover){a.geolocation(false,b.callback)}}}})},init:function(c){var b=this;b.closeCallback=c;b.iosVersion=b.iosVersionCheck();if(typeof(mraid)!="undefined"){b.isMraid=true;mraid.setExpandProperties({useCustomClose:true});mraid.addEventListener("stateChange",function(){if(b.adIsExpanded){b.closeCallback();b.adIsExpanded=false}});document.body.style.margin="0px";container.style.position="absolute";var a=document.createElement("meta");a.name="viewport";a.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0";document.getElementsByTagName("head")[0].appendChild(a)}},iosVersionCheck:function(){var a=window.navigator.userAgent,b=a.indexOf("OS ");if((a.indexOf("iPhone")>-1||a.indexOf("iPad")>-1)&&b>-1){return window.Number(a.substr(b+3,3).replace("_","."))}return 0},queryString:function(e){var c=window.location.href;if(c.indexOf("?")!=-1){var f=new Object();var b=c.split("?");var g=b[1].split("&");for(var d=0;d<g.length;d++){var a=g[d].split("=");f[a[0]]=decodeURIComponent(a[1])}if(e){f=JSON.stringify(f)}return f}else{return false}},sessionImport:function(b){for(var a in b){this[a]=b[a]}},track:function(a){if(this.isPhad){ph.u.track("interaction","cint="+a.name,this.sessionID)}else{console.log(a.name)}},video:function(e){var a=this;this.videoPlaying=true;this.videoId=e.container_id;if(typeof(this.videoId)=="string"){this.videoId=this.gid(this.videoId)}var d={style:{width:this.videoId.offsetWidth+"px",height:this.videoId.offsetHeight+"px",zIndex:5000,margin:0,padding:0,},attributes:{"webkit-playsinline":false,controls:true,}};if(typeof(e.style)!="undefined"){for(var c in e.style){d.style[c]=e.style[c]}}if(d.style.width=="0px"&&d.style.height=="0px"){console.log("at least a height or a width for the video element or its parent element must be declared");return false}if(d.style.width!="0px"&&d.style.height=="0px"){d.style.height=d.style.width.replace("px","")*(9/16)+"px"}if(d.style.width=="0px"&&d.style.height!="0px"){d.style.width=d.style.height.replace("px","")*(16/9)+"px"}if(this.isPhad){ph.v.play(e.video_url,e.name,this.campaignID,this.executionID,this.sessionID,this.videoId);if(typeof(e.hide_close_btn)!="undefined"){if(e.hide_close_btn){phVidClose.style.display="none"}}}else{var b='<video src="'+e.video_url+'"></video>';this.videoId.innerHTML=b}ph_videoElement=this.videoId.getElementsByTagName("video")[0];for(var c in d.attributes){if(typeof(e.attributes[c])!="undefined"){d.attributes[c]=e.attributes[c]}ph_videoElement.setAttribute(c,d.attributes[c])}for(var c in d.style){ph_videoElement.style[c]=d.style[c]}setTimeout(function(){ph_videoElement.play()},500);ph_videoElement.addEventListener("ended",function(){a.videoClose()});ph_videoElement.addEventListener("webkitendfullscreen",function(){a.videoClose()})},videoClose:function(){if(this.isPhad){ph.v.remove()}else{this.videoId.innerHTML=""}this.videoPlaying=false},};if(typeof(ph)=="object"){pcf.isPhad=true}console.log(pcf.isPhad);